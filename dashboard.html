<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Signal Feed</title>
  <style>
    body {
      background-color: #0f121a;
      color: #fff;
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    .container {
      padding: 2rem;
    }
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    select, input[type="text"] {
      background-color: #1d232f;
      color: #fff;
      border: 1px solid #444;
      border-radius: 4px;
      padding: 0.5rem;
      width: 180px;
    }
    select[multiple] {
      height: 120px;
    }
    .filter-label {
      display: flex;
      flex-direction: column;
    }
    .card {
      background-color: #1d232f;
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .card h2 {
      margin: 0;
      font-size: 1.25rem;
    }
    .card p {
      margin: 0.5rem 0;
    }
    .clear-btn {
      background-color: #2e3b55;
      border: none;
      color: #fff;
      padding: 0.6rem 1.2rem;
      border-radius: 4px;
      cursor: pointer;
    }
    .dropdown-hierarchy {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Your Signal Feed</h1>
    <div class="filters">
      <div class="filter-label">
        <label for="name">Name</label>
        <select id="name" multiple></select>
      </div>
      <div class="filter-label">
        <label for="title">Title</label>
        <select id="title" multiple></select>
      </div>
      <div class="filter-label">
        <label for="company">Company</label>
        <select id="company" multiple></select>
      </div>
      <div class="filter-label">
        <label for="source">Source</label>
        <select id="source" multiple></select>
      </div>
      <div class="filter-label">
        <label for="dateYear">Date</label>
        <div class="dropdown-hierarchy">
          <select id="dateYear"></select>
          <select id="dateMonth"></select>
          <select id="dateDay"></select>
        </div>
      </div>
    </div>
    <button class="clear-btn" onclick="clearFilters()">Clear Filters</button>

    <div id="cardContainer"></div>
  </div>

  <script>
    const data = [
      {
        title: "Sr Director of Cloud Engineering",
        name: "Jane Doe",
        company: "Sprinklr",
        source: "TechCrunch",
        date: "2025-09-19",
        description: "Led cloud infrastructure modernization."
      },
      {
        title: "Senior Product Manager",
        name: "John Smith",
        company: "AWS",
        source: "AWS Blog",
        date: "2025-10-04",
        description: "Managed launch of new EC2 features."
      },
      {
        title: "Chief People Officer",
        name: "Holly Novak",
        company: "Jack Henry",
        source: "Google Cloud Blog",
        date: "2025-10-09",
        description: "By leveraging Google Cloud Certificates..."
      }
    ];

    const nameSelect = document.getElementById("name");
    const titleSelect = document.getElementById("title");
    const companySelect = document.getElementById("company");
    const sourceSelect = document.getElementById("source");
    const yearSelect = document.getElementById("dateYear");
    const monthSelect = document.getElementById("dateMonth");
    const daySelect = document.getElementById("dateDay");
    const cardContainer = document.getElementById("cardContainer");

    const uniqueValues = (key) => [...new Set(data.map(d => d[key]))].sort();

    const populateSelect = (select, values, placeholder) => {
      select.innerHTML = "";
      if (!select.multiple) {
        const opt = document.createElement("option");
        opt.value = "";
        opt.textContent = placeholder;
        select.appendChild(opt);
      }
      values.forEach(val => {
        const opt = document.createElement("option");
        opt.value = val;
        opt.textContent = val;
        select.appendChild(opt);
      });
    };

    function populateFilters() {
      populateSelect(nameSelect, uniqueValues("name"), "Select name");
      populateSelect(titleSelect, uniqueValues("title"), "Select title");
      populateSelect(companySelect, uniqueValues("company"), "Select company");
      populateSelect(sourceSelect, uniqueValues("source"), "Select source");

      const years = [...new Set(data.map(d => d.date.split("-")[0]))].sort();
      populateSelect(yearSelect, years, "Year");
      populateSelect(monthSelect, ["01","02","03","04","05","06","07","08","09","10","11","12"], "Month");
      populateSelect(daySelect, Array.from({length:31},(_,i)=>(i+1).toString().padStart(2,"0")), "Day");
    }

    function getSelected(select) {
      return Array.from(select.selectedOptions).map(o => o.value);
    }

    function filterData() {
      const names = getSelected(nameSelect);
      const titles = getSelected(titleSelect);
      const companies = getSelected(companySelect);
      const sources = getSelected(sourceSelect);
      const y = yearSelect.value;
      const m = monthSelect.value;
      const d = daySelect.value;
      const dateFilter = `${y}-${m}-${d}`;

      return data.filter(d => {
        const match = (list, value) => list.length === 0 || list.includes(value);
        let matchDate = true;
        if (y && m && d) matchDate = d.date === dateFilter;
        else if (y && m) matchDate = d.date.startsWith(`${y}-${m}`);
        else if (y) matchDate = d.date.startsWith(`${y}-`);
        return match(names, d.name) && match(titles, d.title) && match(companies, d.company) && match(sources, d.source) && matchDate;
      });
    }

    function renderCards() {
      const filtered = filterData();
      cardContainer.innerHTML = "";
      filtered.forEach(d => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h2>${d.title}</h2>
          <p><strong>${d.name}</strong> at <strong>${d.company}</strong></p>
          <p>${d.source} &mdash; ${d.date}</p>
          <p><em>${d.description}</em></p>
        `;
        cardContainer.appendChild(card);
      });
    }

    function clearFilters() {
      [nameSelect, titleSelect, companySelect, sourceSelect].forEach(s => s.selectedIndex = -1);
      yearSelect.value = "";
      monthSelect.value = "";
      daySelect.value = "";
      renderCards();
    }

    [nameSelect, titleSelect, companySelect, sourceSelect, yearSelect, monthSelect, daySelect]
      .forEach(el => el.addEventListener("change", renderCards));

    populateFilters();
    renderCards();
  </script>
</body>
</html>